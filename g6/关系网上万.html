<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style lang="">
    body {
      width: 100%;
      height: 100%
    }

    #container {
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>

<body>
  <div id="container"></div>
  <script src="https://gw.alipayobjects.com/os/lib/antv/g6/4.3.11/dist/g6.min.js"></script>
  <script>

    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.Graph({
      container: 'container',
      width,
      height,
      modes: {
        default: ['zoom-canvas', 'drag-canvas', 'drag-node'],
      },
      layout: {
        // type: 'forceAtlas2',
        // preventOverlap: true,
        // kr: 10,
        // center: [250, 250],
        type: 'random',
        preventOverlap: true,
        // collideStrength:0.3,
        // alphaMin:0.01,
        // nodeSize:20,
        // nodeSpacing:4,
        // workerEnabled:true,
        // center: [200, 200],     // 可选，默认为图的中心
        // linkDistance: 50,         // 可选，边长
        // nodeStrength: 30,         // 可选
        // edgeStrength: 0.1,        // 可选
        // collideStrength: 0.8,     // 可选
        // nodeSize: 30,             // 可选
        // alpha: 0.3,               // 可选
        // alphaDecay: 0.028,        // 可选
        // alphaMin: 0.01,           // 可选
        // forceSimulation: null,    // 可选
      },
      defaultNode: {
        size: 10,
      },
    });

    let nodes = [], edges = []
    for (let i = 1; i < 10000; i++) {
      // const obj = { data: { id: 'n' + i + 28, name: 'duuliy' + i } }
      // const obj2 = { data: { id: 'e' + i + 27, relationship: '秘密关系', source: 'n2', target: 'n' + i + 28 } }
      const obj = { id: i + '' }
      const obj2 = { "source": '1', "target": i + 1 + '', "value": 1 }
      nodes.push(obj)
      edges.push(obj2)
    }
    // fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
    //   .then((res) =>{
    //     console.log(res.body)
    //     return res.json()
    //   })
    //   .then((data) => {
    //     console.log(data)
    //     // data.nodes.forEach(node => {
    //     //   node.x = Math.random() * 1;
    //     // });
    //     graph.on('afterlayout', e => {
    //       graph.fitView()
    //     })
    //     graph.data(data);
    //     graph.render();
    //   });

    const data = {
      nodes,
      edges
    }
    data.nodes.forEach(node => {
      node.x = Math.random() * 1;
    });
    console.log(data)
    graph.on('afterlayout', e => {
      graph.fitView()
    })
    graph.data(data);
    graph.render();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };



  </script>
</body>

</html>